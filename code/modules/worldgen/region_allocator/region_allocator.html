<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../../"><link rel="stylesheet" href="dmdoc.css"><title>code/modules/worldgen/region_allocator/region_allocator.dm - Goonstation 13</title></head><body><header><a href="index.html">Goonstation 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="code/modules/worldgen/region_allocator/region_allocator.html#define">Define Details</a></header><main><h1>code/modules/worldgen/region_allocator/region_allocator.dm <img src="git.png" width="16" height="16" title="code/modules/worldgen/region_allocator/region_allocator.dm"></h1><table class="summary" cellspacing="0"><tr><th><a href="code/modules/worldgen/region_allocator/region_allocator.html#define/NODE_STATE_FREE">NODE_STATE_FREE</a></th><td>Allocation of map regions.</td></tr><tr><th><a href="datum/allocated_region.html">/datum/allocated_region</a></th><td>Represents a map region you have allocated access to.
While you hold a reference to this region you are free to assume nothing else will allocate this part of the map and touch your region.
You should also not go out of its bounds of course.
Deallocate the region by qdel()ing it or dropping all references to it.</td></tr></table><h2 id="define">Define Details</h2><h3 id="define/NODE_STATE_FREE"><aside class="declaration">#define </aside>NODE_STATE_FREE <img src="git.png" width="16" height="16" title="code/modules/worldgen/region_allocator/region_allocator.dm 26"></h3><p>Allocation of map regions.</p>
<p>The system written in this file is used to get access to rectangular regions of the map space where you can place whatever you want to.
Intended usage is for map structures that either don't need to be loaded at all times or of which there can be multiples of. For example if you
wanted to make a locker that leads to its pocket dimension you will need to create a new pocket dimension for each locker. That's where allocating
a region for each of them would come in handy.</p>
<p>Example usage:</p>
<pre><code>var/datum/allocated_region/region = global.region_allocator.allocate(width=10, height=8)
for(var/x in 1 to region.width)
	for(var/y in 1 to region.height)
		if(x == 1 || y == 1 || x == region.width || y == region.height)
			region.turf_at(x, y).ReplaceWith(/turf/unsimulated/wall)
		else
			region.turf_at(x, y).ReplaceWith(/turf/unsimulated/floor)
mob.set_loc(region.turf_at(2, 2))
boutput(mob, &quot;You are in prison now.&quot;)
SPAWN(60 SECONDS)
	mob.set_loc(whatever)
	qdel(region)
</code></pre></main><footer>goonstation.dme e18c4efa8a3ab2e13df0a169b767dbc7355e7294 — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.10.0</a></footer></body></html>