<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/player - Goonstation 13</title></head><body><header><a href="index.html">Goonstation 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/player.html#var">Var Details</a> - <a href="datum/player.html#proc">Proc Details</a></header><main><h1>/<a href="datum.html">datum</a>/<a href="datum/player.html">player</a> <img src="git.png" width="16" height="16" title="code/player.dm 2"></h1><p>for client variables and stuff that has to persist between connections</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/player.html#var/antag_tokens">antag_tokens</a></th><td>Antag tokens this person has, null until it's fetched</td></tr><tr><th><a href="datum/player.html#var/buildmode">buildmode</a></th><td>buildmode holder of our client so it doesn't need to get rebuilt every time we reconnect</td></tr><tr><th><a href="datum/player.html#var/cached_jobbans">cached_jobbans</a></th><td>Cache jobbans here to speed things up massively</td></tr><tr><th><a href="datum/player.html#var/cached_round_stats">cached_round_stats</a></th><td>have we cached player stats from the api</td></tr><tr><th><a href="datum/player.html#var/ckey">ckey</a></th><td>the ckey of the client object that this datum is attached to</td></tr><tr><th><a href="datum/player.html#var/claimed_rewards">claimed_rewards</a></th><td>Keeps track of once-per-round rewards</td></tr><tr><th><a href="datum/player.html#var/client">client</a></th><td>the client object that this datum is attached to</td></tr><tr><th><a href="datum/player.html#var/clients_pos">clients_pos</a></th><td>position of client in in global.clients</td></tr><tr><th><a href="datum/player.html#var/cloudSaves">cloudSaves</a></th><td>Manager for cloud data and saves</td></tr><tr><th><a href="datum/player.html#var/cooldowns">cooldowns</a></th><td>a list of cooldowns that has to persist between connections</td></tr><tr><th><a href="datum/player.html#var/current_playtime">current_playtime</a></th><td>the total time that this player has been playing the game this round, in 1/10ths of a second</td></tr><tr><th><a href="datum/player.html#var/dnr">dnr</a></th><td>whether this person set DNR (Do not revive)</td></tr><tr><th><a href="datum/player.html#var/fetched_round_stats">fetched_round_stats</a></th><td>have we fetched round stats from the api?</td></tr><tr><th><a href="datum/player.html#var/id">id</a></th><td>the ID of the player as provided by the Goonhub API</td></tr><tr><th><a href="datum/player.html#var/is_newbee">is_newbee</a></th><td>indicates if this is a player who is new to goonstation</td></tr><tr><th><a href="datum/player.html#var/joined_names">joined_names</a></th><td>real_names this person has joined as</td></tr><tr><th><a href="datum/player.html#var/joined_observer">joined_observer</a></th><td>keep track of whether this player joined round as an observer (blocks them from bank payouts)</td></tr><tr><th><a href="datum/player.html#var/key">key</a></th><td>the key of the client object that this datum is attached to</td></tr><tr><th><a href="datum/player.html#var/last_death_time">last_death_time</a></th><td>Last time this person died (used for critter respawns)</td></tr><tr><th><a href="datum/player.html#var/last_seen">last_seen</a></th><td>timestamp of when they were last seen</td></tr><tr><th><a href="datum/player.html#var/mentor">mentor</a></th><td>are they a mentor?</td></tr><tr><th><a href="datum/player.html#var/perm_admin">perm_admin</a></th><td>whteher this person is a permanent admin</td></tr><tr><th><a href="datum/player.html#var/round_join_time">round_join_time</a></th><td>the server time that this player joined the game, in 1/10ths of a second</td></tr><tr><th><a href="datum/player.html#var/round_leave_time">round_leave_time</a></th><td>the server time that this player left the game, in 1/10ths of a second</td></tr><tr><th><a href="datum/player.html#var/rounds_participated">rounds_participated</a></th><td>how many rounds (total) theyve declared ready and joined, null with to differentiate between not set and no participation</td></tr><tr><th><a href="datum/player.html#var/rounds_participated_rp">rounds_participated_rp</a></th><td>how many rounds (rp only) theyve declared ready and joined, null with to differentiate between not set and no participation</td></tr><tr><th><a href="datum/player.html#var/rounds_seen">rounds_seen</a></th><td>how many rounds (total) theyve joined to at least the lobby in, null to differentiate between not set and not seen</td></tr><tr><th><a href="datum/player.html#var/rounds_seen_rp">rounds_seen_rp</a></th><td>how many rounds (rp only) theyve joined to at least the lobby in, null to differentiate between not set and not seen</td></tr><tr><th><a href="datum/player.html#var/see_mentor_pms">see_mentor_pms</a></th><td>do we want to see mentor pms?</td></tr><tr><th><a href="datum/player.html#var/shamecubed">shamecubed</a></th><td>to make sure that they cant escape being shamecubed by just reconnecting</td></tr><tr><th><a href="datum/player.html#var/tempmin">tempmin</a></th><td>whether this person is a temporary admin (this round only)</td></tr><tr><th><a href="datum/player.html#var/tutorial">tutorial</a></th><td>Newbee Tutorial</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/player.html#proc/New">New</a></th><td>starts setup, adds by_type list entry for this datum</td></tr><tr><th><a href="datum/player.html#proc/cache_round_stats">cache_round_stats</a></th><td>queries api to cache stats so its only done once per player per round</td></tr><tr><th><a href="datum/player.html#proc/cache_round_stats_blocking">cache_round_stats_blocking</a></th><td>blocking version of cache_round_stats, queries api to cache stats so its only done once per player per round (please update this proc when adding more player stat vars)</td></tr><tr><th><a href="datum/player.html#proc/calculate_played_time">calculate_played_time</a></th><td>adds the calculated playtime (in 1/10ths of a second) to the playtime variable</td></tr><tr><th><a href="datum/player.html#proc/clear_medal">clear_medal</a></th><td>Removes a medal from this player. Will sleep, make sure the proc calling this is in a spawn etc</td></tr><tr><th><a href="datum/player.html#proc/disposing">disposing</a></th><td>removes by_type list entry for this datum, clears dangling references</td></tr><tr><th><a href="datum/player.html#proc/get_all_medals">get_all_medals</a></th><td>Returns a list of all medals of this player. Will sleep, make sure the proc calling this is in a spawn etc</td></tr><tr><th><a href="datum/player.html#proc/get_round_stats">get_round_stats</a></th><td>returns an assoc list of cached player stats (please update this proc when adding more player stat vars)</td></tr><tr><th><a href="datum/player.html#proc/get_rounds_participated">get_rounds_participated</a></th><td>returns the number of rounds that the player has played by joining in at roundstart</td></tr><tr><th><a href="datum/player.html#proc/get_rounds_seen">get_rounds_seen</a></th><td>returns the number of rounds that the player has at least joined the lobby in</td></tr><tr><th><a href="datum/player.html#proc/has_medal">has_medal</a></th><td>Checks if this player has a medal. Will sleep, make sure the proc calling this is in a spawn etc</td></tr><tr><th><a href="datum/player.html#proc/log_join_time">log_join_time</a></th><td>sets the join time to the current server time, in 1/10ths of a second</td></tr><tr><th><a href="datum/player.html#proc/log_leave_time">log_leave_time</a></th><td>sets the leave time to the current server time, in 1/10ths of a second</td></tr><tr><th><a href="datum/player.html#proc/on_client_authenticated">on_client_authenticated</a></th><td>stuff that should only be done when the client is known to be valid</td></tr><tr><th><a href="datum/player.html#proc/record_login">record_login</a></th><td>Record a player login via the API. Sets player ID field for future API use</td></tr><tr><th><a href="datum/player.html#proc/unlock_medal">unlock_medal</a></th><td>Gives this player a medal. Will not sleep, but does not have a return value. Use unlock_medal_sync if you need to know if it worked</td></tr><tr><th><a href="datum/player.html#proc/unlock_medal_sync">unlock_medal_sync</a></th><td>Gives this player a medal. Will sleep, make sure the proc calling this is in a spawn etc</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/antag_tokens"><aside class="declaration">var </aside>antag_tokens <img src="git.png" width="16" height="16" title="code/player.dm 60"></h3><p>Antag tokens this person has, null until it's fetched</p><h3 id="var/buildmode"><aside class="declaration">var </aside>buildmode <aside>– /<a href="datum.html">datum</a>/buildmode_holder</aside> <img src="git.png" width="16" height="16" title="code/player.dm 46"></h3><p>buildmode holder of our client so it doesn't need to get rebuilt every time we reconnect</p><h3 id="var/cached_jobbans"><aside class="declaration">var </aside>cached_jobbans <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/player.dm 42"></h3><p>Cache jobbans here to speed things up massively</p><h3 id="var/cached_round_stats"><aside class="declaration">var </aside>cached_round_stats <img src="git.png" width="16" height="16" title="code/player.dm 18"></h3><p>have we cached player stats from the api</p><h3 id="var/ckey"><aside class="declaration">var </aside>ckey <img src="git.png" width="16" height="16" title="code/player.dm 8"></h3><p>the ckey of the client object that this datum is attached to</p><h3 id="var/claimed_rewards"><aside class="declaration">var </aside>claimed_rewards <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/medals/rewardsLocker.dm 1287"></h3><p>Keeps track of once-per-round rewards</p><h3 id="var/client"><aside class="declaration">var </aside>client <aside>– /<a href="client.html">client</a></aside> <img src="git.png" width="16" height="16" title="code/player.dm 10"></h3><p>the client object that this datum is attached to</p><h3 id="var/clients_pos"><aside class="declaration">var </aside>clients_pos <img src="git.png" width="16" height="16" title="code/player.dm 34"></h3><p>position of client in in global.clients</p><h3 id="var/cloudSaves"><aside class="declaration">var </aside>cloudSaves <aside>– /<a href="datum.html">datum</a>/<a href="datum/cloudSaves.html">cloudSaves</a></aside> <img src="git.png" width="16" height="16" title="code/player.dm 44"></h3><p>Manager for cloud data and saves</p><h3 id="var/cooldowns"><aside class="declaration">var </aside>cooldowns <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/player.dm 32"></h3><p>a list of cooldowns that has to persist between connections</p><h3 id="var/current_playtime"><aside class="declaration">var </aside>current_playtime <img src="git.png" width="16" height="16" title="code/player.dm 40"></h3><p>the total time that this player has been playing the game this round, in 1/10ths of a second</p><h3 id="var/dnr"><aside class="declaration">var </aside>dnr <img src="git.png" width="16" height="16" title="code/player.dm 52"></h3><p>whether this person set DNR (Do not revive)</p><h3 id="var/fetched_round_stats"><aside class="declaration">var </aside>fetched_round_stats <img src="git.png" width="16" height="16" title="code/player.dm 20"></h3><p>have we fetched round stats from the api?</p><h3 id="var/id"><aside class="declaration">var </aside>id <img src="git.png" width="16" height="16" title="code/player.dm 4"></h3><p>the ID of the player as provided by the Goonhub API</p><h3 id="var/is_newbee"><aside class="declaration">var </aside>is_newbee <img src="git.png" width="16" height="16" title="code/modules/newbee/newbee.dm 5"></h3><p>indicates if this is a player who is new to goonstation</p><h3 id="var/joined_names"><aside class="declaration">var </aside>joined_names <img src="git.png" width="16" height="16" title="code/player.dm 58"></h3><p>real_names this person has joined as</p><h3 id="var/joined_observer"><aside class="declaration">var </aside>joined_observer <img src="git.png" width="16" height="16" title="code/player.dm 54"></h3><p>keep track of whether this player joined round as an observer (blocks them from bank payouts)</p><h3 id="var/key"><aside class="declaration">var </aside>key <img src="git.png" width="16" height="16" title="code/player.dm 6"></h3><p>the key of the client object that this datum is attached to</p><h3 id="var/last_death_time"><aside class="declaration">var </aside>last_death_time <img src="git.png" width="16" height="16" title="code/player.dm 56"></h3><p>Last time this person died (used for critter respawns)</p><h3 id="var/last_seen"><aside class="declaration">var </aside>last_seen <img src="git.png" width="16" height="16" title="code/player.dm 30"></h3><p>timestamp of when they were last seen</p><h3 id="var/mentor"><aside class="declaration">var </aside>mentor <img src="git.png" width="16" height="16" title="code/player.dm 12"></h3><p>are they a mentor?</p><h3 id="var/perm_admin"><aside class="declaration">var </aside>perm_admin <img src="git.png" width="16" height="16" title="code/player.dm 50"></h3><p>whteher this person is a permanent admin</p><h3 id="var/round_join_time"><aside class="declaration">var </aside>round_join_time <img src="git.png" width="16" height="16" title="code/player.dm 36"></h3><p>the server time that this player joined the game, in 1/10ths of a second</p><h3 id="var/round_leave_time"><aside class="declaration">var </aside>round_leave_time <img src="git.png" width="16" height="16" title="code/player.dm 38"></h3><p>the server time that this player left the game, in 1/10ths of a second</p><h3 id="var/rounds_participated"><aside class="declaration">var </aside>rounds_participated <img src="git.png" width="16" height="16" title="code/player.dm 22"></h3><p>how many rounds (total) theyve declared ready and joined, null with to differentiate between not set and no participation</p><h3 id="var/rounds_participated_rp"><aside class="declaration">var </aside>rounds_participated_rp <img src="git.png" width="16" height="16" title="code/player.dm 24"></h3><p>how many rounds (rp only) theyve declared ready and joined, null with to differentiate between not set and no participation</p><h3 id="var/rounds_seen"><aside class="declaration">var </aside>rounds_seen <img src="git.png" width="16" height="16" title="code/player.dm 26"></h3><p>how many rounds (total) theyve joined to at least the lobby in, null to differentiate between not set and not seen</p><h3 id="var/rounds_seen_rp"><aside class="declaration">var </aside>rounds_seen_rp <img src="git.png" width="16" height="16" title="code/player.dm 28"></h3><p>how many rounds (rp only) theyve joined to at least the lobby in, null to differentiate between not set and not seen</p><h3 id="var/see_mentor_pms"><aside class="declaration">var </aside>see_mentor_pms <img src="git.png" width="16" height="16" title="code/player.dm 14"></h3><p>do we want to see mentor pms?</p><h3 id="var/shamecubed"><aside class="declaration">var </aside>shamecubed <img src="git.png" width="16" height="16" title="code/player.dm 16"></h3><p>to make sure that they cant escape being shamecubed by just reconnecting</p><h3 id="var/tempmin"><aside class="declaration">var </aside>tempmin <img src="git.png" width="16" height="16" title="code/player.dm 48"></h3><p>whether this person is a temporary admin (this round only)</p><h3 id="var/tutorial"><aside class="declaration">var </aside>tutorial <aside>– /<a href="datum.html">datum</a>/<a href="datum/tutorial_base/regional/newbee.html">tutorial_base/regional/newbee</a></aside> <img src="git.png" width="16" height="16" title="code/player.dm 62"></h3><p>Newbee Tutorial</p><h2 id="proc">Proc Details</h2><h3 id="proc/New">New<aside>(key)  <img src="git.png" width="16" height="16" title="code/player.dm 65"></aside></h3><p>starts setup, adds by_type list entry for this datum</p><h3 id="proc/cache_round_stats"><aside class="declaration">proc </aside>cache_round_stats<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 115"></aside></h3><p>queries api to cache stats so its only done once per player per round</p><h3 id="proc/cache_round_stats_blocking"><aside class="declaration">proc </aside>cache_round_stats_blocking<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 120"></aside></h3><p>blocking version of cache_round_stats, queries api to cache stats so its only done once per player per round (please update this proc when adding more player stat vars)</p><h3 id="proc/calculate_played_time"><aside class="declaration">proc </aside>calculate_played_time<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 219"></aside></h3><p>adds the calculated playtime (in 1/10ths of a second) to the playtime variable</p><h3 id="proc/clear_medal"><aside class="declaration">proc </aside>clear_medal<aside>(medal_name)  <img src="git.png" width="16" height="16" title="code/player.dm 298"></aside></h3><p>Removes a medal from this player. Will sleep, make sure the proc calling this is in a spawn etc</p><h3 id="proc/disposing">disposing<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 75"></aside></h3><p>removes by_type list entry for this datum, clears dangling references</p><h3 id="proc/get_all_medals"><aside class="declaration">proc </aside>get_all_medals<aside>() <span class="as"> as </span>/list <img src="git.png" width="16" height="16" title="code/player.dm 332"></aside></h3><p>Returns a list of all medals of this player. Will sleep, make sure the proc calling this is in a spawn etc</p><h3 id="proc/get_round_stats"><aside class="declaration">proc </aside>get_round_stats<aside>(allow_blocking)  <img src="git.png" width="16" height="16" title="code/player.dm 167"></aside></h3><p>returns an assoc list of cached player stats (please update this proc when adding more player stat vars)</p><h3 id="proc/get_rounds_participated"><aside class="declaration">proc </aside>get_rounds_participated<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 178"></aside></h3><p>returns the number of rounds that the player has played by joining in at roundstart</p><h3 id="proc/get_rounds_seen"><aside class="declaration">proc </aside>get_rounds_seen<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 191"></aside></h3><p>returns the number of rounds that the player has at least joined the lobby in</p><h3 id="proc/has_medal"><aside class="declaration">proc </aside>has_medal<aside>(medal_name)  <img src="git.png" width="16" height="16" title="code/player.dm 314"></aside></h3><p>Checks if this player has a medal. Will sleep, make sure the proc calling this is in a spawn etc</p><h3 id="proc/log_join_time"><aside class="declaration">proc </aside>log_join_time<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 210"></aside></h3><p>sets the join time to the current server time, in 1/10ths of a second</p><h3 id="proc/log_leave_time"><aside class="declaration">proc </aside>log_leave_time<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 214"></aside></h3><p>sets the leave time to the current server time, in 1/10ths of a second</p><h3 id="proc/on_client_authenticated"><aside class="declaration">proc </aside>on_client_authenticated<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 83"></aside></h3><p>stuff that should only be done when the client is known to be valid</p><h3 id="proc/record_login"><aside class="declaration">proc </aside>record_login<aside>()  <img src="git.png" width="16" height="16" title="code/player.dm 89"></aside></h3><p>Record a player login via the API. Sets player ID field for future API use</p><h3 id="proc/unlock_medal"><aside class="declaration">proc </aside>unlock_medal<aside>(medal_name, announce)  <img src="git.png" width="16" height="16" title="code/player.dm 258"></aside></h3><p>Gives this player a medal. Will not sleep, but does not have a return value. Use unlock_medal_sync if you need to know if it worked</p><h3 id="proc/unlock_medal_sync"><aside class="declaration">proc </aside>unlock_medal_sync<aside>(medal_name, announce)  <img src="git.png" width="16" height="16" title="code/player.dm 263"></aside></h3><p>Gives this player a medal. Will sleep, make sure the proc calling this is in a spawn etc</p></main><footer>goonstation.dme e18c4efa8a3ab2e13df0a169b767dbc7355e7294 — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.10.0</a></footer></body></html>