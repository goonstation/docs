<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/req_contract - Goonstation 13</title></head><body><header><a href="index.html">Goonstation 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/req_contract.html#var">Var Details</a> - <a href="datum/req_contract.html#proc">Proc Details</a></header><main><h1>Requisition Contract <aside>/<a href="datum.html">datum</a>/<a href="datum/req_contract.html">req_contract</a></aside> <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 452"></h1><p>The primary datum for requisitions contracts.
Top level contains cargo handling data, payout data, item reward generators if present, and formatted descriptions for the QM requisitions menu.</p>
<p>Actual evaluation of contract entries occurs through requisition entries (/datum/rc_entry) contained within.
The contents of containers are evaluated sequentially, using the rc_eval proc of each entry that hasn't been fulfilled yet at time of evaluation.</p>
<p>Fulfillment is managed internally within entries; the contract only cares about whether an item was needed, and whether the entry is satisfied.
You can have any sort of evaluation you like within new types of contract entry, as long as you're feeding back those two pieces of information.</p>
<p>Contracts are divided by requisition class. Three market classes of requisition currently exist: Aid, Civilian and Scientific.
Each market cycle, these requisitions are refreshed, with at least one requisition from each category being present after the refresh.
These contract types have different requirements and sometimes an influence on what you can do with them. See individual files for more details.
Special requisition contracts also exist, shipped directly as a hard copy. These obey notably different rules, as described in rc_special.dm.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/req_contract.html#var/count">count</a></th><td>determines payout multiplier</td></tr><tr><th><a href="datum/req_contract.html#var/flavor_desc">flavor_desc</a></th><td>Optional but recommended flavor text to accompany the contract</td></tr><tr><th><a href="datum/req_contract.html#var/hide_item_payouts">hide_item_payouts</a></th><td>Is set to true to prevent any included item rewarders from being shown on contract</td></tr><tr><th><a href="datum/req_contract.html#var/item_rewarders">item_rewarders</a></th><td>Optional list of item rewarder datums; their descriptions will be shown on contract unless flagged otherwise</td></tr><tr><th><a href="datum/req_contract.html#var/name">name</a></th><td>Title of the contract as used by the requisitions clearinghouse seen in the QM supply computer</td></tr><tr><th><a href="datum/req_contract.html#var/payout">payout</a></th><td>A baseline amount of cash you'll be given for fulfilling the requisition; this is modified by entries
The current thinking as of the time of writing this comment is for this to be 10 times some salary's wage,
times an additional modifier based on difficulty</td></tr><tr><th><a href="datum/req_contract.html#var/pinned">pinned</a></th><td>Tracks whether contract is pinned; one contract at a time may be pinned, reserving it for QM and preventing it from leaving with market shift</td></tr><tr><th><a href="datum/req_contract.html#var/rc_entries">rc_entries</a></th><td>List of contract entry datums; sent cargo will be passed into these for evaluation</td></tr><tr><th><a href="datum/req_contract.html#var/req_class">req_class</a></th><td>Class of the requisition contract, defaulting to misc (0); aid requisitions are urgent and will not wait for you</td></tr><tr><th><a href="datum/req_contract.html#var/req_code">req_code</a></th><td>Requisition code used for standard contracts; is automatically generated if not specified, but can be manually set if desired</td></tr><tr><th><a href="datum/req_contract.html#var/requis_desc">requis_desc</a></th><td>Mandatory descriptive text that lists contract requirements; automatically populated from the list of rc_entries</td></tr><tr><th><a href="datum/req_contract.html#var/weight">weight</a></th><td>Contract's roll weight; dictates frequency of market appearance, or probability of selection for special order event. Can be left default</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/req_contract.html#proc/requisify">requisify</a></th><td>Called to tally a crate's contents, to evaluate whether they've fulfilled the contract.
If only_evaluate is FALSE, the proc will actually consume relevant contents, and return a post-sale handling code appropriately.
If only_evaluate is TRUE, the proc will simply index relevant contents, and return a textual summary of detected contract fulfillment.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/count"><aside class="declaration">var </aside>count <aside>– /static</aside> <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 479"></h3><p>determines payout multiplier</p><h3 id="var/flavor_desc"><aside class="declaration">var </aside>flavor_desc <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 473"></h3><p>Optional but recommended flavor text to accompany the contract</p><h3 id="var/hide_item_payouts"><aside class="declaration">var </aside>hide_item_payouts <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 471"></h3><p>Is set to true to prevent any included item rewarders from being shown on contract</p><h3 id="var/item_rewarders"><aside class="declaration">var </aside>item_rewarders <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 469"></h3><p>Optional list of item rewarder datums; their descriptions will be shown on contract unless flagged otherwise</p><h3 id="var/name"><aside class="declaration">var </aside>name <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 454"></h3><p>Title of the contract as used by the requisitions clearinghouse seen in the QM supply computer</p><h3 id="var/payout"><aside class="declaration">var </aside>payout <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 465"></h3><p>A baseline amount of cash you'll be given for fulfilling the requisition; this is modified by entries
The current thinking as of the time of writing this comment is for this to be 10 times some salary's wage,
times an additional modifier based on difficulty</p><h3 id="var/pinned"><aside class="declaration">var </aside>pinned <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 477"></h3><p>Tracks whether contract is pinned; one contract at a time may be pinned, reserving it for QM and preventing it from leaving with market shift</p><h3 id="var/rc_entries"><aside class="declaration">var </aside>rc_entries <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 467"></h3><p>List of contract entry datums; sent cargo will be passed into these for evaluation</p><h3 id="var/req_class"><aside class="declaration">var </aside>req_class <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 456"></h3><p>Class of the requisition contract, defaulting to misc (0); aid requisitions are urgent and will not wait for you</p><h3 id="var/req_code"><aside class="declaration">var </aside>req_code <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 458"></h3><p>Requisition code used for standard contracts; is automatically generated if not specified, but can be manually set if desired</p><h3 id="var/requis_desc"><aside class="declaration">var </aside>requis_desc <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 475"></h3><p>Mandatory descriptive text that lists contract requirements; automatically populated from the list of rc_entries</p><h3 id="var/weight"><aside class="declaration">var </aside>weight <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 460"></h3><p>Contract's roll weight; dictates frequency of market appearance, or probability of selection for special order event. Can be left default</p><h2 id="proc">Proc Details</h2><h3 id="proc/requisify"><aside class="declaration">proc </aside>requisify<aside>(/<a href="obj.html">obj</a>/<a href="obj/storage.html">storage</a>/crate/sell_crate, only_evaluate)  <img src="git.png" width="16" height="16" title="code/modules/economy/requisition/requisition_contracts.dm 501"></aside></h3><p>Called to tally a crate's contents, to evaluate whether they've fulfilled the contract.
If only_evaluate is FALSE, the proc will actually consume relevant contents, and return a post-sale handling code appropriately.
If only_evaluate is TRUE, the proc will simply index relevant contents, and return a textual summary of detected contract fulfillment.</p></main><footer>goonstation.dme e18c4efa8a3ab2e13df0a169b767dbc7355e7294 — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.10.0</a></footer></body></html>