<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/speech_module_tree - Goonstation 13</title></head><body><header><a href="index.html">Goonstation 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/speech_module_tree.html#var">Var Details</a> - <a href="datum/speech_module_tree.html#proc">Proc Details</a></header><main><h1>/<a href="datum.html">datum</a>/<a href="datum/speech_module_tree.html">speech_module_tree</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 6"></h1><p>Speech module tree datums handle applying the effects of speech prefix, modifier, and output modules to say message
datums sent by the parent atom. All say message datums will be processed here prior to being passed to the appropriate
say channel by a speech output module.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/speech_module_tree.html#var/auxiliary_trees">auxiliary_trees</a></th><td>A list of all auxiliary speech module trees with this speech module tree registered as a target.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/persistent_speech_modifiers_by_id">persistent_speech_modifiers_by_id</a></th><td>An associative list of speech modifier modules that overide say channel modifier preferences, indexed by the module ID.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/postmodifier_speech_prefixes_by_prefix_id">postmodifier_speech_prefixes_by_prefix_id</a></th><td>An associative list of speech prefix modules that should be processed after modifiers, indexed by the prefix ID or IDs.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/premodifier_speech_prefixes_by_prefix_id">premodifier_speech_prefixes_by_prefix_id</a></th><td>An associative list of speech prefix modules that should be processed before modifiers, indexed by the prefix ID or IDs.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/secondary_parents">secondary_parents</a></th><td>A list of all atoms that list this speech module tree as their speech tree, despite not being the true parent.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speaker_origin">speaker_origin</a></th><td>The atom that should act as the origin point for sending messages from this speech module tree.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speaker_parent">speaker_parent</a></th><td>The owner of this speech module tree.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speech_modifier_ids_with_subcount">speech_modifier_ids_with_subcount</a></th><td>An associative list of speech modifier module subscription counts, indexed by the module ID.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speech_modifiers_by_id">speech_modifiers_by_id</a></th><td>An associative list of speech modifier modules, indexed by the module ID.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speech_output_ids_with_subcount">speech_output_ids_with_subcount</a></th><td>An associative list of speech output module subscription counts, indexed by the module ID.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speech_outputs_by_channel">speech_outputs_by_channel</a></th><td>An associative list of speech output modules, indexed by the module channel. Additionally, each sublist of modules is sorted by priority.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speech_outputs_by_id">speech_outputs_by_id</a></th><td>An associative list of speech output modules, indexed by the module ID.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speech_prefix_ids_with_subcount">speech_prefix_ids_with_subcount</a></th><td>An associative list of speech prefix module subscription counts, indexed by the module ID.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speech_prefixes">speech_prefixes</a></th><td>A list of speech prefix modules, sorted by priority.</td></tr><tr><th><a href="datum/speech_module_tree.html#var/speech_prefixes_by_id">speech_prefixes_by_id</a></th><td>An associative list of speech prefix modules, indexed by the module ID.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/speech_module_tree.html#proc/GetAllPrefixes">GetAllPrefixes</a></th><td>Returns all speech prefix modules on this speech tree.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/GetModifierByID">GetModifierByID</a></th><td>Returns the speech modifier module that matches the specified ID.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/GetOutputByID">GetOutputByID</a></th><td>Returns the speech output module that matches the specified ID.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/GetOutputsByChannel">GetOutputsByChannel</a></th><td>Returns a list of speech output modules that output to the specified channel.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/GetPrefixByID">GetPrefixByID</a></th><td>Returns the speech prefix module that matches the specified ID.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/GetPrefixByPrefixText">GetPrefixByPrefixText</a></th><td>Returns the speech prefix module that matches the specified prefix text.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/RemoveSpeechModifier">RemoveSpeechModifier</a></th><td>Removes a speech modifier module from the tree. Returns TRUE on success, FALSE on failure.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/RemoveSpeechOutput">RemoveSpeechOutput</a></th><td>Removes a speech output module from the tree. Returns TRUE on success, FALSE on failure.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/RemoveSpeechPrefix">RemoveSpeechPrefix</a></th><td>Removes a speech prefix module from the tree. Returns TRUE on success, FALSE on failure.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/_AddSpeechModifier">_AddSpeechModifier</a></th><td>Adds a new speech modifier module to the tree. Returns a reference to the new modifier module on success.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/_AddSpeechOutput">_AddSpeechOutput</a></th><td>Adds a new speech output module to the tree. Returns a reference to the new output module on success.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/_AddSpeechPrefix">_AddSpeechPrefix</a></th><td>Adds a new speech prefix module to the tree. Returns a reference to the new prefix module on success.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/migrate_speech_tree">migrate_speech_tree</a></th><td>Migrates this speech module tree to a new speaker parent and origin.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/process">process</a></th><td>Process the message, applying the effects of each accent, speech, and output module.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/process_prefix">process_prefix</a></th><td>Attempt to locate an applicable prefix module from the provided prefix module cache, and apply its affects to a say message.</td></tr><tr><th><a href="datum/speech_module_tree.html#proc/update_speaker_origin">update_speaker_origin</a></th><td>Update this speech module tree's speaker origin. This will cause spoken messages to appear to originate fom the new speaker origin.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/auxiliary_trees"><aside class="declaration">var </aside>auxiliary_trees <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/speech_module_tree.html">speech_module_tree</a>/<a href="datum/speech_module_tree/auxiliary.html">auxiliary</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 14"></h3><p>A list of all auxiliary speech module trees with this speech module tree registered as a target.</p><h3 id="var/persistent_speech_modifiers_by_id"><aside class="declaration">var </aside>persistent_speech_modifiers_by_id <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/modifier.html">modifier</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 28"></h3><p>An associative list of speech modifier modules that overide say channel modifier preferences, indexed by the module ID.</p><h3 id="var/postmodifier_speech_prefixes_by_prefix_id"><aside class="declaration">var </aside>postmodifier_speech_prefixes_by_prefix_id <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/prefix.html">prefix</a>/postmodifier</aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 39"></h3><p>An associative list of speech prefix modules that should be processed after modifiers, indexed by the prefix ID or IDs.</p><h3 id="var/premodifier_speech_prefixes_by_prefix_id"><aside class="declaration">var </aside>premodifier_speech_prefixes_by_prefix_id <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/prefix.html">prefix</a>/premodifier</aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 37"></h3><p>An associative list of speech prefix modules that should be processed before modifiers, indexed by the prefix ID or IDs.</p><h3 id="var/secondary_parents"><aside class="declaration">var </aside>secondary_parents <aside>– /list/<a href="atom.html">atom</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 12"></h3><p>A list of all atoms that list this speech module tree as their speech tree, despite not being the true parent.</p><h3 id="var/speaker_origin"><aside class="declaration">var </aside>speaker_origin <aside>– /<a href="atom.html">atom</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 10"></h3><p>The atom that should act as the origin point for sending messages from this speech module tree.</p><h3 id="var/speaker_parent"><aside class="declaration">var </aside>speaker_parent <aside>– /<a href="atom.html">atom</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 8"></h3><p>The owner of this speech module tree.</p><h3 id="var/speech_modifier_ids_with_subcount"><aside class="declaration">var </aside>speech_modifier_ids_with_subcount <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 24"></h3><p>An associative list of speech modifier module subscription counts, indexed by the module ID.</p><h3 id="var/speech_modifiers_by_id"><aside class="declaration">var </aside>speech_modifiers_by_id <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/modifier.html">modifier</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 26"></h3><p>An associative list of speech modifier modules, indexed by the module ID.</p><h3 id="var/speech_output_ids_with_subcount"><aside class="declaration">var </aside>speech_output_ids_with_subcount <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 17"></h3><p>An associative list of speech output module subscription counts, indexed by the module ID.</p><h3 id="var/speech_outputs_by_channel"><aside class="declaration">var </aside>speech_outputs_by_channel <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/output.html">output</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 21"></h3><p>An associative list of speech output modules, indexed by the module channel. Additionally, each sublist of modules is sorted by priority.</p><h3 id="var/speech_outputs_by_id"><aside class="declaration">var </aside>speech_outputs_by_id <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/output.html">output</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 19"></h3><p>An associative list of speech output modules, indexed by the module ID.</p><h3 id="var/speech_prefix_ids_with_subcount"><aside class="declaration">var </aside>speech_prefix_ids_with_subcount <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 31"></h3><p>An associative list of speech prefix module subscription counts, indexed by the module ID.</p><h3 id="var/speech_prefixes"><aside class="declaration">var </aside>speech_prefixes <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/prefix.html">prefix</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 33"></h3><p>A list of speech prefix modules, sorted by priority.</p><h3 id="var/speech_prefixes_by_id"><aside class="declaration">var </aside>speech_prefixes_by_id <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/prefix.html">prefix</a></aside> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 35"></h3><p>An associative list of speech prefix modules, indexed by the module ID.</p><h2 id="proc">Proc Details</h2><h3 id="proc/GetAllPrefixes"><aside class="declaration">proc </aside>GetAllPrefixes<aside>() <span class="as"> as </span>/list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/prefix.html">prefix</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 380"></aside></h3><p>Returns all speech prefix modules on this speech tree.</p><h3 id="proc/GetModifierByID"><aside class="declaration">proc </aside>GetModifierByID<aside>(modifier_id) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/modifier.html">modifier</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 323"></aside></h3><p>Returns the speech modifier module that matches the specified ID.</p><h3 id="proc/GetOutputByID"><aside class="declaration">proc </aside>GetOutputByID<aside>(output_id, subchannel) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/output.html">output</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 277"></aside></h3><p>Returns the speech output module that matches the specified ID.</p><h3 id="proc/GetOutputsByChannel"><aside class="declaration">proc </aside>GetOutputsByChannel<aside>(channel_id) <span class="as"> as </span>/list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/output.html">output</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 282"></aside></h3><p>Returns a list of speech output modules that output to the specified channel.</p><h3 id="proc/GetPrefixByID"><aside class="declaration">proc </aside>GetPrefixByID<aside>(prefix_id) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/prefix.html">prefix</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 370"></aside></h3><p>Returns the speech prefix module that matches the specified ID.</p><h3 id="proc/GetPrefixByPrefixText"><aside class="declaration">proc </aside>GetPrefixByPrefixText<aside>(prefix_text) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/prefix.html">prefix</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 375"></aside></h3><p>Returns the speech prefix module that matches the specified prefix text.</p><h3 id="proc/RemoveSpeechModifier"><aside class="declaration">proc </aside>RemoveSpeechModifier<aside>(modifier_id, count)  <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 309"></aside></h3><p>Removes a speech modifier module from the tree. Returns TRUE on success, FALSE on failure.</p><h3 id="proc/RemoveSpeechOutput"><aside class="declaration">proc </aside>RemoveSpeechOutput<aside>(output_id, subchannel, count)  <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 262"></aside></h3><p>Removes a speech output module from the tree. Returns TRUE on success, FALSE on failure.</p><h3 id="proc/RemoveSpeechPrefix"><aside class="declaration">proc </aside>RemoveSpeechPrefix<aside>(prefix_id, count)  <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 352"></aside></h3><p>Removes a speech prefix module from the tree. Returns TRUE on success, FALSE on failure.</p><h3 id="proc/_AddSpeechModifier"><aside class="declaration">proc </aside>_AddSpeechModifier<aside>(modifier_id, /list/arguments, count) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/modifier.html">modifier</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 287"></aside></h3><p>Adds a new speech modifier module to the tree. Returns a reference to the new modifier module on success.</p><h3 id="proc/_AddSpeechOutput"><aside class="declaration">proc </aside>_AddSpeechOutput<aside>(output_id, /list/arguments, count) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/output.html">output</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 242"></aside></h3><p>Adds a new speech output module to the tree. Returns a reference to the new output module on success.</p><h3 id="proc/_AddSpeechPrefix"><aside class="declaration">proc </aside>_AddSpeechPrefix<aside>(prefix_id, /list/arguments, count) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/prefix.html">prefix</a> <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 328"></aside></h3><p>Adds a new speech prefix module to the tree. Returns a reference to the new prefix module on success.</p><h3 id="proc/migrate_speech_tree"><aside class="declaration">proc </aside>migrate_speech_tree<aside>(/<a href="atom.html">atom</a>/new_parent, /<a href="atom.html">atom</a>/new_origin, preserve_old_reference)  <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 214"></aside></h3><p>Migrates this speech module tree to a new speaker parent and origin.</p><h3 id="proc/process"><aside class="declaration">proc </aside>process<aside>(/<a href="datum.html">datum</a>/<a href="datum/say_message.html">say_message</a>/message)  <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 108"></aside></h3><p>Process the message, applying the effects of each accent, speech, and output module.</p><h3 id="proc/process_prefix"><aside class="declaration">proc </aside>process_prefix<aside>(/<a href="datum.html">datum</a>/<a href="datum/say_message.html">say_message</a>/message, /list/<a href="datum.html">datum</a>/<a href="datum/speech_module.html">speech_module</a>/<a href="datum/speech_module/prefix.html">prefix</a>/module_cache)  <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 190"></aside></h3><p>Attempt to locate an applicable prefix module from the provided prefix module cache, and apply its affects to a say message.</p><h3 id="proc/update_speaker_origin"><aside class="declaration">proc </aside>update_speaker_origin<aside>(/<a href="atom.html">atom</a>/new_origin)  <img src="git.png" width="16" height="16" title="code/modules/speech/trees/speech_module_tree.dm 235"></aside></h3><p>Update this speech module tree's speaker origin. This will cause spoken messages to appear to originate fom the new speaker origin.</p></main><footer>goonstation.dme e18c4efa8a3ab2e13df0a169b767dbc7355e7294 — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.10.0</a></footer></body></html>