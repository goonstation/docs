<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/projectile - Goonstation 13</title></head><body><header><a href="index.html">Goonstation 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/projectile.html#var">Var Details</a></header><main><h1>projectile <aside>/<a href="obj.html">obj</a>/<a href="obj/projectile.html">projectile</a></aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 12"></h1><p>This file is not good
Fucked up var names lie ahead
Caution, traveler</p>
<p>General cleanup todo:
Go through undocumented math and document it
Remove bad vars, fill in gaps then created
Deduplicate info between this and proj_data</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/projectile.html#var/angle">angle</a></th><td>Angle of this shot. For reference @see setup()</td></tr><tr><th><a href="obj/projectile.html#var/armor_ignored">armor_ignored</a></th><td>Does this projectile pierce armor?</td></tr><tr><th><a href="obj/projectile.html#var/called_target">called_target</a></th><td>Target for called shots behavior - by default does not affect projectile behaviour</td></tr><tr><th><a href="obj/projectile.html#var/called_target_turf">called_target_turf</a></th><td>Turf of the called_target during projectile initialization</td></tr><tr><th><a href="obj/projectile.html#var/collide_with_other_projectiles">collide_with_other_projectiles</a></th><td>Below stuff but also this is dumb and only used for frost bats and I don't even know why it's used there. TODO remove</td></tr><tr><th><a href="obj/projectile.html#var/crossing">crossing</a></th><td>The list of precalculated turfs this projectile will try to cross, along with the tick count(?) when each turf should be crossed.
The structure of this list is pure Byond demon magic: it's an indexed list of key-value pairs that can be accessed like:
<code>var/turf/T = crossed[i]</code> OR <code>var/value = crossed[T]</code> where <code>T</code> is a turf in the list and <code>value</code> is the aforesaid tick count.
a thousand year curse on whoever thought this was a good idea, and Lummox for enabling them.</td></tr><tr><th><a href="obj/projectile.html#var/curr_t">curr_t</a></th><td>For precalculated projectiles, how far along the <code>crossing</code> list have we reached</td></tr><tr><th><a href="obj/projectile.html#var/data">data</a></th><td>Arbitrary projectile data. Currently only used to hold an object that a projectile is seeking for a singular type. TODO remove</td></tr><tr><th><a href="obj/projectile.html#var/facing_dir">facing_dir</a></th><td>Default dir, set to in do_step()</td></tr><tr><th><a href="obj/projectile.html#var/goes_through_mobs">goes_through_mobs</a></th><td>Whether this projectile can freely pass through mobs</td></tr><tr><th><a href="obj/projectile.html#var/goes_through_walls">goes_through_walls</a></th><td>Whether this projectile can freely pass through dense turfs</td></tr><tr><th><a href="obj/projectile.html#var/has_atmosphere">has_atmosphere</a></th><td>Simulate standard atmos for any mobs inside</td></tr><tr><th><a href="obj/projectile.html#var/has_died">has_died</a></th><td>For disabling collision when a projectile has died but hasn't been disposed yet, e.g. under on_end effects</td></tr><tr><th><a href="obj/projectile.html#var/hitlist">hitlist</a></th><td>List of atoms collided with this tick</td></tr><tr><th><a href="obj/projectile.html#var/impact_x">impact_x</a></th><td>X position of the projectile impact, used for particles and bullet impacts</td></tr><tr><th><a href="obj/projectile.html#var/impact_y">impact_y</a></th><td>y position of the projectile impact, used for particles and bullet impacts</td></tr><tr><th><a href="obj/projectile.html#var/implanted">implanted</a></th><td>What kind of implant this projectile leaves in impacted mobs</td></tr><tr><th><a href="obj/projectile.html#var/incidence">incidence</a></th><td>Reflection normal on the current tile (NORTH if projectile came from the north, etc.)
TODO can maybe be replaced with a single dir check when relevant? not 100% sure why we need to track this always. Might be crucial, dunno</td></tr><tr><th><a href="obj/projectile.html#var/initial_power">initial_power</a></th><td>TODO this var also feels dumb. convert to initial() prolly (on data not on this)</td></tr><tr><th><a href="obj/projectile.html#var/is_processing">is_processing</a></th><td>Yeah this sucks. TODO remove. I don't care bring the bug back so we can actually fix it</td></tr><tr><th><a href="obj/projectile.html#var/max_range">max_range</a></th><td>Maximum range this projectile can travel before impacting a (non-dense) turf</td></tr><tr><th><a href="obj/projectile.html#var/mob_shooter">mob_shooter</a></th><td>Mob-typed copy of <code>shooter</code> var to save time on casts later</td></tr><tr><th><a href="obj/projectile.html#var/orig_turf">orig_turf</a></th><td>Original turf this projectiles was fired from</td></tr><tr><th><a href="obj/projectile.html#var/pierces_left">pierces_left</a></th><td>Number of impassable atoms this projectile can pierce. Decremented on pierce. Can probably be axed in favor of the component. TODO remove</td></tr><tr><th><a href="obj/projectile.html#var/power">power</a></th><td>One of the two below vars needs to be renamed or removed. Fucking confusing
I don't know why this var is here it just stores the result of a proc called on the proj data. TODO revisit</td></tr><tr><th><a href="obj/projectile.html#var/proj_data">proj_data</a></th><td>Projectile data; almost all specific projectile information and functionality lives here</td></tr><tr><th><a href="obj/projectile.html#var/reflectcount">reflectcount</a></th><td>Number of times this projectile has been reflected off of things. Used to cap reflections</td></tr><tr><th><a href="obj/projectile.html#var/shooter">shooter</a></th><td>The mob/thing that fired this projectile</td></tr><tr><th><a href="obj/projectile.html#var/special_data">special_data</a></th><td>Bullshit var for storing special data for niche cases. Sucks, is probably necessary nonetheless</td></tr><tr><th><a href="obj/projectile.html#var/spread">spread</a></th><td>Degree of spread this projectile was fired with. Note that this informational, and doesn't affect the projectile's trajectory</td></tr><tr><th><a href="obj/projectile.html#var/targets">targets</a></th><td>List of all targets this projectile can go after; useful for homing projectiles and the like</td></tr><tr><th><a href="obj/projectile.html#var/ticks_until_can_hit_mob">ticks_until_can_hit_mob</a></th><td>Tracks the number of steps before a piercing projectile is allowed to hit a mob after hitting another one. Scarcely used. TODO remove?</td></tr><tr><th><a href="obj/projectile.html#var/travelled">travelled</a></th><td>Number of tiles this projectile has travelled</td></tr><tr><th><a href="obj/projectile.html#var/was_pointblank">was_pointblank</a></th><td>Whether this projectile was shot point-blank style (clicking an adjacent mob). Adjusts the log entry accordingly</td></tr><tr><th><a href="obj/projectile.html#var/was_setup">was_setup</a></th><td>TODO axe this after testing. Used very infrequently, looks redundant</td></tr><tr><th><a href="obj/projectile.html#var/wx">wx</a></th><td>Offset within a tile, separate to pixel_x/y due to animation things probably?</td></tr><tr><th><a href="obj/projectile.html#var/xo">xo</a></th><td>x component of the projectile's direction vector. EAST is positive, WEST is negative.</td></tr><tr><th><a href="obj/projectile.html#var/yo">yo</a></th><td>y component of the projectile's direction vector. NORTH is positive, SOUTH is negative.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/angle"><aside class="declaration">var </aside>angle <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 39"></h3><p>Angle of this shot. For reference @see setup()</p><h3 id="var/armor_ignored"><aside class="declaration">var </aside>armor_ignored <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 27"></h3><p>Does this projectile pierce armor?</p><h3 id="var/called_target"><aside class="declaration">var </aside>called_target <aside>– /<a href="atom.html">atom</a></aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 117"></h3><p>Target for called shots behavior - by default does not affect projectile behaviour</p><h3 id="var/called_target_turf"><aside class="declaration">var </aside>called_target_turf <aside>– /<a href="turf.html">turf</a></aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 120"></h3><p>Turf of the called_target during projectile initialization</p><h3 id="var/collide_with_other_projectiles"><aside class="declaration">var </aside>collide_with_other_projectiles <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 114"></h3><p>Below stuff but also this is dumb and only used for frost bats and I don't even know why it's used there. TODO remove</p><h3 id="var/crossing"><aside class="declaration">var </aside>crossing <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 80"></h3><p>The list of precalculated turfs this projectile will try to cross, along with the tick count(?) when each turf should be crossed.
The structure of this list is pure Byond demon magic: it's an indexed list of key-value pairs that can be accessed like:
<code>var/turf/T = crossed[i]</code> OR <code>var/value = crossed[T]</code> where <code>T</code> is a turf in the list and <code>value</code> is the aforesaid tick count.
a thousand year curse on whoever thought this was a good idea, and Lummox for enabling them.</p><h3 id="var/curr_t"><aside class="declaration">var </aside>curr_t <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 82"></h3><p>For precalculated projectiles, how far along the <code>crossing</code> list have we reached</p><h3 id="var/data"><aside class="declaration">var </aside>data <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 105"></h3><p>Arbitrary projectile data. Currently only used to hold an object that a projectile is seeking for a singular type. TODO remove</p><h3 id="var/facing_dir"><aside class="declaration">var </aside>facing_dir <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 46"></h3><p>Default dir, set to in do_step()</p><h3 id="var/goes_through_mobs"><aside class="declaration">var </aside>goes_through_mobs <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 58"></h3><p>Whether this projectile can freely pass through mobs</p><h3 id="var/goes_through_walls"><aside class="declaration">var </aside>goes_through_walls <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 56"></h3><p>Whether this projectile can freely pass through dense turfs</p><h3 id="var/has_atmosphere"><aside class="declaration">var </aside>has_atmosphere <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 128"></h3><p>Simulate standard atmos for any mobs inside</p><h3 id="var/has_died"><aside class="declaration">var </aside>has_died <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 64"></h3><p>For disabling collision when a projectile has died but hasn't been disposed yet, e.g. under on_end effects</p><h3 id="var/hitlist"><aside class="declaration">var </aside>hitlist <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 60"></h3><p>List of atoms collided with this tick</p><h3 id="var/impact_x"><aside class="declaration">var </aside>impact_x <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 123"></h3><p>X position of the projectile impact, used for particles and bullet impacts</p><h3 id="var/impact_y"><aside class="declaration">var </aside>impact_y <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 125"></h3><p>y position of the projectile impact, used for particles and bullet impacts</p><h3 id="var/implanted"><aside class="declaration">var </aside>implanted <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 31"></h3><p>What kind of implant this projectile leaves in impacted mobs</p><h3 id="var/incidence"><aside class="declaration">var </aside>incidence <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 88"></h3><p>Reflection normal on the current tile (NORTH if projectile came from the north, etc.)
TODO can maybe be replaced with a single dir check when relevant? not 100% sure why we need to track this always. Might be crucial, dunno</p><h3 id="var/initial_power"><aside class="declaration">var </aside>initial_power <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 95"></h3><p>TODO this var also feels dumb. convert to initial() prolly (on data not on this)</p><h3 id="var/is_processing"><aside class="declaration">var </aside>is_processing <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 100"></h3><p>Yeah this sucks. TODO remove. I don't care bring the bug back so we can actually fix it</p><h3 id="var/max_range"><aside class="declaration">var </aside>max_range <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 29"></h3><p>Maximum range this projectile can travel before impacting a (non-dense) turf</p><h3 id="var/mob_shooter"><aside class="declaration">var </aside>mob_shooter <aside>– /<a href="mob.html">mob</a></aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 35"></h3><p>Mob-typed copy of <code>shooter</code> var to save time on casts later</p><h3 id="var/orig_turf"><aside class="declaration">var </aside>orig_turf <aside>– /<a href="turf.html">turf</a></aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 41"></h3><p>Original turf this projectiles was fired from</p><h3 id="var/pierces_left"><aside class="declaration">var </aside>pierces_left <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 108"></h3><p>Number of impassable atoms this projectile can pierce. Decremented on pierce. Can probably be axed in favor of the component. TODO remove</p><h3 id="var/power"><aside class="declaration">var </aside>power <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 93"></h3><p>One of the two below vars needs to be renamed or removed. Fucking confusing
I don't know why this var is here it just stores the result of a proc called on the proj data. TODO revisit</p><h3 id="var/proj_data"><aside class="declaration">var </aside>proj_data <aside>– /<a href="datum.html">datum</a>/<a href="datum/projectile.html">projectile</a></aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 22"></h3><p>Projectile data; almost all specific projectile information and functionality lives here</p><h3 id="var/reflectcount"><aside class="declaration">var </aside>reflectcount <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 62"></h3><p>Number of times this projectile has been reflected off of things. Used to cap reflections</p><h3 id="var/shooter"><aside class="declaration">var </aside>shooter <aside>– /<a href="atom.html">atom</a></aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 33"></h3><p>The mob/thing that fired this projectile</p><h3 id="var/special_data"><aside class="declaration">var </aside>special_data <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 51"></h3><p>Bullshit var for storing special data for niche cases. Sucks, is probably necessary nonetheless</p><h3 id="var/spread"><aside class="declaration">var </aside>spread <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 43"></h3><p>Degree of spread this projectile was fired with. Note that this informational, and doesn't affect the projectile's trajectory</p><h3 id="var/targets"><aside class="declaration">var </aside>targets <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 25"></h3><p>List of all targets this projectile can go after; useful for homing projectiles and the like</p><h3 id="var/ticks_until_can_hit_mob"><aside class="declaration">var </aside>ticks_until_can_hit_mob <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 54"></h3><p>Tracks the number of steps before a piercing projectile is allowed to hit a mob after hitting another one. Scarcely used. TODO remove?</p><h3 id="var/travelled"><aside class="declaration">var </aside>travelled <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 37"></h3><p>Number of tiles this projectile has travelled</p><h3 id="var/was_pointblank"><aside class="declaration">var </aside>was_pointblank <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 48"></h3><p>Whether this projectile was shot point-blank style (clicking an adjacent mob). Adjusts the log entry accordingly</p><h3 id="var/was_setup"><aside class="declaration">var </aside>was_setup <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 111"></h3><p>TODO axe this after testing. Used very infrequently, looks redundant</p><h3 id="var/wx"><aside class="declaration">var </aside>wx <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 73"></h3><p>Offset within a tile, separate to pixel_x/y due to animation things probably?</p><h3 id="var/xo"><aside class="declaration">var </aside>xo <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 68"></h3><p>x component of the projectile's direction vector. EAST is positive, WEST is negative.</p><h3 id="var/yo"><aside class="declaration">var </aside>yo <img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile_parent.dm 70"></h3><p>y component of the projectile's direction vector. NORTH is positive, SOUTH is negative.</p></main><footer>goonstation.dme e18c4efa8a3ab2e13df0a169b767dbc7355e7294 — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.10.0</a></footer></body></html>