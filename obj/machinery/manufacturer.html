<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/machinery/manufacturer - Goonstation 13</title></head><body><header><a href="index.html">Goonstation 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/machinery/manufacturer.html#var">Var Details</a> - <a href="obj/machinery/manufacturer.html#proc">Proc Details</a></header><main><h1>manufacturing unit <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/manufacturer.html">manufacturer</a></aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 25"></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/accept_blueprints">accept_blueprints</a></th><td>Whether or not we accept blueprints from the ruk kit into this manufacturer.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/account">account</a></th><td>Card currently scanned into the machine, used when deducting payment for ores from a Rockbox</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/active_power_consumption">active_power_consumption</a></th><td>How much power is consumed while active? This is determined automatically when the unit starts a production cycle</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/available">available</a></th><td>A list of every manufacture datum typepath available in this unit subtype by default</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/base_material_class">base_material_class</a></th><td>Base class for material pieces that the manufacturer accepts.
Keep this as material pieces only unless you're making larger changes to the system,
Various parts of the code are coupled to assuming that this is a material piece w/ a material.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/cached_producibility_data">cached_producibility_data</a></th><td>List which stores producibility data to be returned early in get_producibility_for_blueprints</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/categories">categories</a></th><td>A list of valid categories the manufacturer will use. Any invalid provided categories are assigned &quot;Miscellaneous&quot;.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/dismantle_stage">dismantle_stage</a></th><td>The dismantlement stage we are currently at. See manufacturer.dm line 15 for details on the defines</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/download">download</a></th><td>Manufacture datum typepaths gained from scanned blueprints</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/drive_recipes">drive_recipes</a></th><td>Manufacture datum typepaths provided by an inserted manudrive</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/electrified">electrified</a></th><td>This is a timer and not a true/false; it's decremented every process() tick</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/emagged">emagged</a></th><td>Whether or not a traitor emagged the manufacturer, and thus will start acting really weird atop other things</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/error">error</a></th><td>A somewhat legacy variable to output silent yet visible errors to the user in the UI.
Current uses include when there is a lack of materials, an invalid blueprint, and when there is not enough manudrive uses.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/free_resource_amt">free_resource_amt</a></th><td>The amount of each free resource that the manufacturer comes preloaded with.
Separate from free_resources() as typically manufacturers use the same amount of each type.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/free_resources">free_resources</a></th><td>The types of material pieces of which the manufacturer will be spawned with.
The amount of each resource is defined on free_resource_amt</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/hacked">hacked</a></th><td>Whether or not we are hacked, and thus will show our hidden blueprints + change our maximum speed setting.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/hidden">hidden</a></th><td>These manufacture datum typepaths are available by default, but can't be printed or seen unless the machine is hacked</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/icon_base">icon_base</a></th><td>This is used to make icon state changes cleaner by setting it to &quot;fab-[icon_base]&quot;</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/link">link</a></th><td>The data terminal attached underfloor to this manufacturer. Allows use of PNET packets</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/malfunction">malfunction</a></th><td>Whether or not the manufacturer is malfunctioning, and thus will occasionally flip_out() among other glitchy things.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/manudrive">manudrive</a></th><td>Where insertible manudrives are held for reading blueprints and getting/setting fablimits.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/material_patterns_by_ref">material_patterns_by_ref</a></th><td>Helper list which stores all the material patterns each loaded material satisfies, by ref to the piece</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/mode">mode</a></th><td>The current status of the machine.
&quot;ready&quot; / MODE_READY - The machine is ready to produce more blueprints.
&quot;working&quot; / MODE_WORKING - The machine is currently producing a blueprint.
&quot;halt&quot; / MODE_HALT - The machine stopped due to some problem arising.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/nearby_turfs">nearby_turfs</a></th><td>Turfs around the manufacturer are stored here for performance reasons</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/original_duration">original_duration</a></th><td>Original duration of the currently queued print, used to keep track of progress when M.time gets modified weirdly in queueing</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/output_cap">output_cap</a></th><td>The maximum amount of produce this can dispense on outputting a blueprint's chosen outputs.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/output_target">output_target</a></th><td>The current atom we will output product into. Can be a turf, a crate, etc.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/panel_open">panel_open</a></th><td>Whether or not the wiring panel is open for the UI.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/power_wire_cut">power_wire_cut</a></th><td>Whether or not the power wire is cut, removing the ability for the manufacturer to do work</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/queue">queue</a></th><td>A list of manufacture datums in the form of a queue. Blueprints are taken from index 1 and added at the last index</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/repeat">repeat</a></th><td>Controls whether or not to repeat the first item in the queue while working.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/req_access">req_access</a></th><td>req_access is used to lock out specific features and not limit deconstruction therefore DECON_NO_ACCESS is required</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/share_id">share_id</a></th><td>!!very hacky and dumb!! All manufacturers with the same share_id have the same storage datum, ie share materials inherently</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/should_update_static">should_update_static</a></th><td>true by default to update first time around, set to true whenever something is done that invalidates static data</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/speed">speed</a></th><td>Controls how fast blueprints are produced. Higher speed settings have a exponential effect on power use.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/stored_previous_blueprint_data">stored_previous_blueprint_data</a></th><td>JSON-encoded string of the blueprint data. used for comparisons in get_producibility_for_blueprints</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/stored_previous_materials_data">stored_previous_materials_data</a></th><td>List which stores the materials as they were last seen in get_producibility_for_blueprints</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/supplemental_desc">supplemental_desc</a></th><td>Appended in get_desc() to the base description, to make subtype definitions cleaner</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/time_left">time_left</a></th><td>Time left until the current blueprint is complete. Updated on pausing and on starting a new blueprint.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/time_left_electrified">time_left_electrified</a></th><td>This is a timer decremented every process() tick representing how long the machine will be electrified for.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/time_started">time_started</a></th><td>Time the blueprint was queued, or if paused/resumed, the time we resumed the blueprint.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#var/wires">wires</a></th><td>This is a bitflag used to track wire states, for hacking and such. Replace it with something cleaner if an option exists when you're reading this :p</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/blueprint_is_available">blueprint_is_available</a></th><td>Returns whether or not a blueprint is able to be used for printing</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/blueprints_as_list">blueprints_as_list</a></th><td>Converts list of manufacture datums to list keyed by category containing listified manufacture datums of said category.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/broken_state_topic">broken_state_topic</a></th><td>Overriden to not disable if no power, wire maintenence to restore power is on the GUI which creates catch-22 situation</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/can_eject_material">can_eject_material</a></th><td>Helper proc to check whether or not we can eject the material from storage or not.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/can_use_ranged">can_use_ranged</a></th><td>Check if the target is allowed to interact with this at range. Silicons can, humans can't.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/check_enough_materials">check_enough_materials</a></th><td>Check if a blueprint can be manufactured with the current materials.
mats_used - a list from get_materials_needed to avoid calling the proc twice</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/check_physical_proximity">check_physical_proximity</a></th><td>Handle checking and outputting for not being close to the machine</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/claim_free_resources">claim_free_resources</a></th><td>Adds the resources we define in free_resources to our storage, and clears the list when we're done
to represent we do not have more resources to claim</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/compute_producibility_for_blueprints">compute_producibility_for_blueprints</a></th><td>Runs the actual computation for the above proc. Split apart so the caching can still be a bit more performant</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/eject_material">eject_material</a></th><td>Handles allowing the user to eject integer amounts of material</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/get_bank_data">get_bank_data</a></th><td>Get the relevant bank record data from the current account. Returns null if there's no account scanned yet</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/get_blueprint_type">get_blueprint_type</a></th><td>Get whether a blueprint is available, hidden, downloaded, or a drive recipe. If in multiple print lists, picks the first result. Or null.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/get_contents">get_contents</a></th><td>Safely gets our storage contents. In case someone does something like load materials into the machine before we have initialized our storage
Also ejects things w/o material or that aren't pieces, to ensure safety</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/get_drive_uses_left">get_drive_uses_left</a></th><td>Get how many more times a drive can produce items it is stocked with</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/get_material_by_ref">get_material_by_ref</a></th><td>Returns material which matches ref from storage, else returns null</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/get_material_for_requirement">get_material_for_requirement</a></th><td>Get the material in storage which satisfies some amount of a requirement.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/get_materials_needed">get_materials_needed</a></th><td>Returns associative list of manufacturing requirement to material piece references, but does not guarantee all item_paths are satisfied or that
the blueprint will have the required materials ready by the time it reaches the front of the queue. Reqs not satisfied are not added to mats_used</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/get_producibility_for_blueprints">get_producibility_for_blueprints</a></th><td>Get an associated list for the UI of blueprintRef to associated list of requirement name to whether that one's producible, but only when necessary</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/get_requirements_material_satisfies">get_requirements_material_satisfies</a></th><td>Get a list of the patterns a material satisfies. Does not include &quot;ALL&quot; in list, as it is assumed such a requirement is handled separately.
Includes all previous material tier strings for simple &quot;x in y&quot; checks, as well as material ID for those recipies which need exact mat.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/grump_message">grump_message</a></th><td>Helper to play the grump with or without a grump message/sound. Just as a note the sound is appropriate when the machine is reporting the error,
if its a grump that the player probably had to think about or find out then theres no &quot;reason&quot; for there to be sound</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/has_physical_proximity">has_physical_proximity</a></th><td>Check if the target is within arm's reach of the machine</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/manufacture_as_list">manufacture_as_list</a></th><td>Converts a manufacture datum to a list with string keys to relevant vars for the UI</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/remove_materials">remove_materials</a></th><td>Go through the material requirements of a blueprint, removing the respective used materials</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/rockboxes_as_list">rockboxes_as_list</a></th><td>Gets rockbox data as list for ui_static_data</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/scan_card">scan_card</a></th><td>Scan in some supposed card into the machine, prompting the usr for a PIN. Returns TRUE if we managed to scan the card.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/swap_materials">swap_materials</a></th><td>Swap the &quot;position&quot; of two materials in the manufacturer for the sake of priority use management.</td></tr><tr><th><a href="obj/machinery/manufacturer.html#proc/try_shock">try_shock</a></th><td>Try to shock the target if the machine is electrified, returns whether or not the target got shocked</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/accept_blueprints"><aside class="declaration">var </aside>accept_blueprints <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 103"></h3><p>Whether or not we accept blueprints from the ruk kit into this manufacturer.</p><h3 id="var/account"><aside class="declaration">var </aside>account <aside>– /<a href="datum.html">datum</a>/<a href="datum/db_record.html">db_record</a></aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 69"></h3><p>Card currently scanned into the machine, used when deducting payment for ores from a Rockbox</p><h3 id="var/active_power_consumption"><aside class="declaration">var </aside>active_power_consumption <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 54"></h3><p>How much power is consumed while active? This is determined automatically when the unit starts a production cycle</p><h3 id="var/available"><aside class="declaration">var </aside>available <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 105"></h3><p>A list of every manufacture datum typepath available in this unit subtype by default</p><h3 id="var/base_material_class"><aside class="declaration">var </aside>base_material_class <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 84"></h3><p>Base class for material pieces that the manufacturer accepts.
Keep this as material pieces only unless you're making larger changes to the system,
Various parts of the code are coupled to assuming that this is a material piece w/ a material.</p><h3 id="var/cached_producibility_data"><aside class="declaration">var </aside>cached_producibility_data <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 94"></h3><p>List which stores producibility data to be returned early in get_producibility_for_blueprints</p><h3 id="var/categories"><aside class="declaration">var </aside>categories <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 102"></h3><p>A list of valid categories the manufacturer will use. Any invalid provided categories are assigned &quot;Miscellaneous&quot;.</p><h3 id="var/dismantle_stage"><aside class="declaration">var </aside>dismantle_stage <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 56"></h3><p>The dismantlement stage we are currently at. See manufacturer.dm line 15 for details on the defines</p><h3 id="var/download"><aside class="declaration">var </aside>download <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 106"></h3><p>Manufacture datum typepaths gained from scanned blueprints</p><h3 id="var/drive_recipes"><aside class="declaration">var </aside>drive_recipes <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 107"></h3><p>Manufacture datum typepaths provided by an inserted manudrive</p><h3 id="var/electrified"><aside class="declaration">var </aside>electrified <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 61"></h3><p>This is a timer and not a true/false; it's decremented every process() tick</p><h3 id="var/emagged"><aside class="declaration">var </aside>emagged <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 59"></h3><p>Whether or not a traitor emagged the manufacturer, and thus will start acting really weird atop other things</p><h3 id="var/error"><aside class="declaration">var </aside>error <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 50"></h3><p>A somewhat legacy variable to output silent yet visible errors to the user in the UI.
Current uses include when there is a lack of materials, an invalid blueprint, and when there is not enough manudrive uses.</p><h3 id="var/free_resource_amt"><aside class="declaration">var </aside>free_resource_amt <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 87"></h3><p>The amount of each free resource that the manufacturer comes preloaded with.
Separate from free_resources() as typically manufacturers use the same amount of each type.</p><h3 id="var/free_resources"><aside class="declaration">var </aside>free_resources <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 90"></h3><p>The types of material pieces of which the manufacturer will be spawned with.
The amount of each resource is defined on free_resource_amt</p><h3 id="var/hacked"><aside class="declaration">var </aside>hacked <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 57"></h3><p>Whether or not we are hacked, and thus will show our hidden blueprints + change our maximum speed setting.</p><h3 id="var/hidden"><aside class="declaration">var </aside>hidden <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 108"></h3><p>These manufacture datum typepaths are available by default, but can't be printed or seen unless the machine is hacked</p><h3 id="var/icon_base"><aside class="declaration">var </aside>icon_base <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 30"></h3><p>This is used to make icon state changes cleaner by setting it to &quot;fab-[icon_base]&quot;</p><h3 id="var/link"><aside class="declaration">var </aside>link <aside>– /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/power.html">power</a>/data_terminal</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 68"></h3><p>The data terminal attached underfloor to this manufacturer. Allows use of PNET packets</p><h3 id="var/malfunction"><aside class="declaration">var </aside>malfunction <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 58"></h3><p>Whether or not the manufacturer is malfunctioning, and thus will occasionally flip_out() among other glitchy things.</p><h3 id="var/manudrive"><aside class="declaration">var </aside>manudrive <aside>– /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data/floppy.html">disk/data/floppy</a>/<a href="obj/item/disk/data/floppy/manudrive.html">manudrive</a></aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 91"></h3><p>Where insertible manudrives are held for reading blueprints and getting/setting fablimits.</p><h3 id="var/material_patterns_by_ref"><aside class="declaration">var </aside>material_patterns_by_ref <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 93"></h3><p>Helper list which stores all the material patterns each loaded material satisfies, by ref to the piece</p><h3 id="var/mode"><aside class="declaration">var </aside>mode <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 47"></h3><p>The current status of the machine.
&quot;ready&quot; / MODE_READY - The machine is ready to produce more blueprints.
&quot;working&quot; / MODE_WORKING - The machine is currently producing a blueprint.
&quot;halt&quot; / MODE_HALT - The machine stopped due to some problem arising.</p><h3 id="var/nearby_turfs"><aside class="declaration">var </aside>nearby_turfs <aside>– /list/<a href="turf.html">turf</a></aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 63"></h3><p>Turfs around the manufacturer are stored here for performance reasons</p><h3 id="var/original_duration"><aside class="declaration">var </aside>original_duration <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 72"></h3><p>Original duration of the currently queued print, used to keep track of progress when M.time gets modified weirdly in queueing</p><h3 id="var/output_cap"><aside class="declaration">var </aside>output_cap <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 77"></h3><p>The maximum amount of produce this can dispense on outputting a blueprint's chosen outputs.</p><h3 id="var/output_target"><aside class="declaration">var </aside>output_target <aside>– /<a href="atom.html">atom</a></aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 62"></h3><p>The current atom we will output product into. Can be a turf, a crate, etc.</p><h3 id="var/panel_open"><aside class="declaration">var </aside>panel_open <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 55"></h3><p>Whether or not the wiring panel is open for the UI.</p><h3 id="var/power_wire_cut"><aside class="declaration">var </aside>power_wire_cut <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 60"></h3><p>Whether or not the power wire is cut, removing the ability for the manufacturer to do work</p><h3 id="var/queue"><aside class="declaration">var </aside>queue <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/manufacture.html">manufacture</a></aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 78"></h3><p>A list of manufacture datums in the form of a queue. Blueprints are taken from index 1 and added at the last index</p><h3 id="var/repeat"><aside class="declaration">var </aside>repeat <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 76"></h3><p>Controls whether or not to repeat the first item in the queue while working.</p><h3 id="var/req_access">req_access <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 36"></h3><p>req_access is used to lock out specific features and not limit deconstruction therefore DECON_NO_ACCESS is required</p><h3 id="var/share_id"><aside class="declaration">var </aside>share_id <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 127"></h3><p>!!very hacky and dumb!! All manufacturers with the same share_id have the same storage datum, ie share materials inherently</p><h3 id="var/should_update_static"><aside class="declaration">var </aside>should_update_static <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 92"></h3><p>true by default to update first time around, set to true whenever something is done that invalidates static data</p><h3 id="var/speed"><aside class="declaration">var </aside>speed <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 75"></h3><p>Controls how fast blueprints are produced. Higher speed settings have a exponential effect on power use.</p><h3 id="var/stored_previous_blueprint_data"><aside class="declaration">var </aside>stored_previous_blueprint_data <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 98"></h3><p>JSON-encoded string of the blueprint data. used for comparisons in get_producibility_for_blueprints</p><h3 id="var/stored_previous_materials_data"><aside class="declaration">var </aside>stored_previous_materials_data <aside>– /list</aside> <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 97"></h3><p>List which stores the materials as they were last seen in get_producibility_for_blueprints</p><h3 id="var/supplemental_desc"><aside class="declaration">var </aside>supplemental_desc <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 42"></h3><p>Appended in get_desc() to the base description, to make subtype definitions cleaner</p><h3 id="var/time_left"><aside class="declaration">var </aside>time_left <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 73"></h3><p>Time left until the current blueprint is complete. Updated on pausing and on starting a new blueprint.</p><h3 id="var/time_left_electrified"><aside class="declaration">var </aside>time_left_electrified <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 53"></h3><p>This is a timer decremented every process() tick representing how long the machine will be electrified for.</p><h3 id="var/time_started"><aside class="declaration">var </aside>time_started <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 74"></h3><p>Time the blueprint was queued, or if paused/resumed, the time we resumed the blueprint.</p><h3 id="var/wires"><aside class="declaration">var </aside>wires <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 64"></h3><p>This is a bitflag used to track wire states, for hacking and such. Replace it with something cleaner if an option exists when you're reading this :p</p><h2 id="proc">Proc Details</h2><h3 id="proc/blueprint_is_available"><aside class="declaration">proc </aside>blueprint_is_available<aside>(/<a href="datum.html">datum</a>/<a href="datum/manufacture.html">manufacture</a>/M)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 572"></aside></h3><p>Returns whether or not a blueprint is able to be used for printing</p><h3 id="proc/blueprints_as_list"><aside class="declaration">proc </aside>blueprints_as_list<aside>(/list/L, /<a href="mob.html">mob</a>/user, static_elements)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 440"></aside></h3><p>Converts list of manufacture datums to list keyed by category containing listified manufacture datums of said category.</p><h3 id="proc/broken_state_topic">broken_state_topic<aside>(/<a href="mob.html">mob</a>/user)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 315"></aside></h3><p>Overriden to not disable if no power, wire maintenence to restore power is on the GUI which creates catch-22 situation</p><h3 id="proc/can_eject_material"><aside class="declaration">proc </aside>can_eject_material<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/material_piece.html">material_piece</a>/material_in_storage, /<a href="mob.html">mob</a>/user)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1188"></aside></h3><p>Helper proc to check whether or not we can eject the material from storage or not.</p><h3 id="proc/can_use_ranged"><aside class="declaration">proc </aside>can_use_ranged<aside>(/<a href="mob.html">mob</a>/target)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 604"></aside></h3><p>Check if the target is allowed to interact with this at range. Silicons can, humans can't.</p><h3 id="proc/check_enough_materials"><aside class="declaration">proc </aside>check_enough_materials<aside>(/<a href="datum.html">datum</a>/<a href="datum/manufacture.html">manufacture</a>/M, /list/mats_used)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1678"></aside></h3><p>Check if a blueprint can be manufactured with the current materials.
mats_used - a list from get_materials_needed to avoid calling the proc twice</p><h3 id="proc/check_physical_proximity"><aside class="declaration">proc </aside>check_physical_proximity<aside>(/<a href="mob.html">mob</a>/target)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 597"></aside></h3><p>Handle checking and outputting for not being close to the machine</p><h3 id="proc/claim_free_resources"><aside class="declaration">proc </aside>claim_free_resources<aside>()  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 2008"></aside></h3><p>Adds the resources we define in free_resources to our storage, and clears the list when we're done
to represent we do not have more resources to claim</p><h3 id="proc/compute_producibility_for_blueprints"><aside class="declaration">proc </aside>compute_producibility_for_blueprints<aside>()  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 541"></aside></h3><p>Runs the actual computation for the above proc. Split apart so the caching can still be a bit more performant</p><h3 id="proc/eject_material"><aside class="declaration">proc </aside>eject_material<aside>(mat_ref, /<a href="mob.html">mob</a>/user)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1158"></aside></h3><p>Handles allowing the user to eject integer amounts of material</p><h3 id="proc/get_bank_data"><aside class="declaration">proc </aside>get_bank_data<aside>()  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1221"></aside></h3><p>Get the relevant bank record data from the current account. Returns null if there's no account scanned yet</p><h3 id="proc/get_blueprint_type"><aside class="declaration">proc </aside>get_blueprint_type<aside>(/<a href="datum.html">datum</a>/<a href="datum/manufacture.html">manufacture</a>/M)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 402"></aside></h3><p>Get whether a blueprint is available, hidden, downloaded, or a drive recipe. If in multiple print lists, picks the first result. Or null.</p><h3 id="proc/get_contents"><aside class="declaration">proc </aside>get_contents<aside>()  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1966"></aside></h3><p>Safely gets our storage contents. In case someone does something like load materials into the machine before we have initialized our storage
Also ejects things w/o material or that aren't pieces, to ensure safety</p><h3 id="proc/get_drive_uses_left"><aside class="declaration">proc </aside>get_drive_uses_left<aside>()  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1696"></aside></h3><p>Get how many more times a drive can produce items it is stocked with</p><h3 id="proc/get_material_by_ref"><aside class="declaration">proc </aside>get_material_by_ref<aside>(mat_ref)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1641"></aside></h3><p>Returns material which matches ref from storage, else returns null</p><h3 id="proc/get_material_for_requirement"><aside class="declaration">proc </aside>get_material_for_requirement<aside>(/<a href="datum.html">datum</a>/<a href="datum/manufacturing_requirement.html">manufacturing_requirement</a>/R, required_amount, /list/mats_reserved)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1661"></aside></h3><p>Get the material in storage which satisfies some amount of a requirement.</p><h3 id="proc/get_materials_needed"><aside class="declaration">proc </aside>get_materials_needed<aside>(/<a href="datum.html">datum</a>/<a href="datum/manufacture.html">manufacture</a>/M)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1649"></aside></h3><p>Returns associative list of manufacturing requirement to material piece references, but does not guarantee all item_paths are satisfied or that
the blueprint will have the required materials ready by the time it reaches the front of the queue. Reqs not satisfied are not added to mats_used</p><h3 id="proc/get_producibility_for_blueprints"><aside class="declaration">proc </aside>get_producibility_for_blueprints<aside>()  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 502"></aside></h3><p>Get an associated list for the UI of blueprintRef to associated list of requirement name to whether that one's producible, but only when necessary</p><h3 id="proc/get_requirements_material_satisfies"><aside class="declaration">proc </aside>get_requirements_material_satisfies<aside>(/<a href="datum.html">datum</a>/<a href="datum/material.html">material</a>/M)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1633"></aside></h3><p>Get a list of the patterns a material satisfies. Does not include &quot;ALL&quot; in list, as it is assumed such a requirement is handled separately.
Includes all previous material tier strings for simple &quot;x in y&quot; checks, as well as material ID for those recipies which need exact mat.</p><h3 id="proc/grump_message"><aside class="declaration">proc </aside>grump_message<aside>(/<a href="mob.html">mob</a>/target, message, sound)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 609"></aside></h3><p>Helper to play the grump with or without a grump message/sound. Just as a note the sound is appropriate when the machine is reporting the error,
if its a grump that the player probably had to think about or find out then theres no &quot;reason&quot; for there to be sound</p><h3 id="proc/has_physical_proximity"><aside class="declaration">proc </aside>has_physical_proximity<aside>(/<a href="mob.html">mob</a>/target)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 593"></aside></h3><p>Check if the target is within arm's reach of the machine</p><h3 id="proc/manufacture_as_list"><aside class="declaration">proc </aside>manufacture_as_list<aside>(/<a href="datum.html">datum</a>/<a href="datum/manufacture.html">manufacture</a>/M, /<a href="mob.html">mob</a>/user)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 452"></aside></h3><p>Converts a manufacture datum to a list with string keys to relevant vars for the UI</p><h3 id="proc/remove_materials"><aside class="declaration">proc </aside>remove_materials<aside>(/<a href="datum.html">datum</a>/<a href="datum/manufacture.html">manufacture</a>/M)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1684"></aside></h3><p>Go through the material requirements of a blueprint, removing the respective used materials</p><h3 id="proc/rockboxes_as_list"><aside class="declaration">proc </aside>rockboxes_as_list<aside>()  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 415"></aside></h3><p>Gets rockbox data as list for ui_static_data</p><h3 id="proc/scan_card"><aside class="declaration">proc </aside>scan_card<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/I)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1202"></aside></h3><p>Scan in some supposed card into the machine, prompting the usr for a PIN. Returns TRUE if we managed to scan the card.</p><h3 id="proc/swap_materials"><aside class="declaration">proc </aside>swap_materials<aside>(/<a href="mob.html">mob</a>/user, material_1, material_2)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 1144"></aside></h3><p>Swap the &quot;position&quot; of two materials in the manufacturer for the sake of priority use management.</p><h3 id="proc/try_shock"><aside class="declaration">proc </aside>try_shock<aside>(/<a href="mob.html">mob</a>/target, chance)  <img src="git.png" width="16" height="16" title="code/obj/machinery/manufacturer.dm 587"></aside></h3><p>Try to shock the target if the machine is electrified, returns whether or not the target got shocked</p></main><footer>goonstation.dme e18c4efa8a3ab2e13df0a169b767dbc7355e7294 — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.10.0</a></footer></body></html>